<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>QR Kod Oluşturucu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- QRCodeStyling kütüphanesi (daha fazla stil seçeneği sunar) -->
  <script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      margin: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    .input-container {
      max-width: 600px;
      margin: 0 auto 20px auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
    }
    .input-container label {
      display: block;
      margin-bottom: 10px;
      font-size: 16px;
    }
    .input-container input {
      width: 80%;
      padding: 8px;
      margin-bottom: 10px;
      font-size: 16px;
    }
    .input-container button {
      padding: 10px 20px;
      background-color: #007bff;
      border: none;
      border-radius: 4px;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
    }
    .input-container button:hover {
      background-color: #0056b3;
    }
    .qr-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }
    .qr-item {
      background-color: #fff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
      width: 220px;
    }
    /* Ekranda gösterimi 150x150 yapıyoruz; indirme için 300x300 üretiyoruz. */
    .qr-item .qr-display {
      width: 150px;
      height: 150px;
      margin: 0 auto;
      overflow: hidden;
    }
    .qr-item p {
      margin-top: 10px;
      font-weight: bold;
    }
    .qr-item button {
      margin-top: 10px;
      padding: 8px 16px;
      background-color: #28a745;
      border: none;
      border-radius: 4px;
      color: #fff;
      font-size: 14px;
      cursor: pointer;
    }
    .qr-item button:hover {
      background-color: #218838;
    }
  </style>
</head>
<body>
  <h1>QR Kod Oluşturucu</h1>
  
  <div class="input-container">
    <label for="startNumber">Başlangıç Masa Numarası:</label>
    <input type="number" id="startNumber" placeholder="Örneğin: 1" min="1">
    
    <label for="totalCount">Toplam Masa Sayısı:</label>
    <input type="number" id="totalCount" placeholder="Örneğin: 10" min="1">
    
    <br>
    <button onclick="generateQRCodes()">QR Kodlarını Oluştur</button>
  </div>
  
  <div class="qr-container" id="qrContainer"></div>
  
  <script>
    function generateQRCodes() {
      const container = document.getElementById("qrContainer");
      container.innerHTML = ""; // Önceki QR kodları temizle
      
      const startNumber = parseInt(document.getElementById("startNumber").value);
      const totalCount = parseInt(document.getElementById("totalCount").value);
      
      if (isNaN(startNumber) || isNaN(totalCount) || totalCount < 1) {
        alert("Lütfen geçerli bir başlangıç numarası ve toplam masa sayısı giriniz.");
        return;
      }
      
      // Her masa numarası için (başlangıçtan başlayarak toplam masa sayısı kadar) QR kod oluştur
      for (let i = startNumber; i < startNumber + totalCount; i++) {
        // Masa numarası parametresini ekleyelim
        const baseURL = "https://erkayayazilim.github.io/wrdenemasea/";
        const urlWithParam = baseURL + "?masa=" + encodeURIComponent(i);
        
        // QR kod kapsayıcı eleman
        const qrItemDiv = document.createElement("div");
        qrItemDiv.className = "qr-item";
        
        // Görüntü için ayrı bir div oluşturup CSS ile 150x150 olarak ölçeklendirelim
        const qrDisplayDiv = document.createElement("div");
        qrDisplayDiv.className = "qr-display";
        
        // Yüksek çözünürlüklü QR kod oluşturuyoruz (300x300) – indirme kalitesi artar.
        const qrCode = new QRCodeStyling({
          width: 300,
          height: 300,
          data: urlWithParam,
          margin: 5,
          dotsOptions: {
            color: "#000000",
            type: "rounded"  // Yuvarlatılmış noktalar, kareli görünümü azaltır.
          },
          backgroundOptions: {
            color: "#ffffff"
          }
        });
        
        // QR kodu, hem görüntü hem de indirme için qrDisplayDiv içerisine ekliyoruz.
        qrCode.append(qrDisplayDiv);
        
        // Masa numarası etiketini oluştur
        const label = document.createElement("p");
        label.textContent = "Masa " + i;
        
        // İndirme butonu oluştur
        const downloadBtn = document.createElement("button");
        downloadBtn.textContent = "İndir";
        downloadBtn.onclick = function() {
          // QR kodu yüksek çözünürlüklü olarak indirir (300x300)
          qrCode.download({ name: "Masa-" + i + ".png", extension: "png" });
        };
        
        // Elemanları sırayla ekle
        qrItemDiv.appendChild(qrDisplayDiv);
        qrItemDiv.appendChild(label);
        qrItemDiv.appendChild(downloadBtn);
        container.appendChild(qrItemDiv);
      }
    }
  </script>
</body>
</html>
